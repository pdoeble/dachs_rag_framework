{
  "version": "0.2.0",
  "description": "Config for generate_qa_candidates: Chunk-Auswahl, Kontextbau (FAISS) und LLM-QA-Erzeugung. Pfade kommen aus config/paths/paths.json.",

  "paths": {
    "paths_file": "config/paths/paths.json",
    "prompt_system_file": "config/prompts/qa_generation_system.txt",
    "prompt_user_template_file": "config/prompts/qa_generation_user.txt"
  },

  "filters": {
    "languages_allowed": ["de", "en"],
    "trust_levels_allowed": ["high", "medium"],
    "chunk_roles_allowed": ["definition", "explanation", "example", "key_result", "exercise"],
    "content_types_allowed": ["textbook", "handbook", "paper", "simulation_report", "api_doc", "software_manual"]
  },

  "neighbors": {
    "top_k_faiss": 16,
    "similarity_threshold": 0.2,
    "max_neighbors": 8,
    "max_local_neighbors_before": 1,
    "max_local_neighbors_after": 1
  },

  "grouping": {
    "min_group_size": 2,
    "max_group_size": 6,
    "max_tokens_context": 4096
  },

  "sampling": {
    "max_qa_per_group": 3,
    "max_groups_per_chunk": 1,
    "max_qa_per_document": 50,
    "global_qa_limit": 20000,
    "sampling_strategy": "sequential"
  },

  "llm": {
    "backend": "ollama",
    "model": "qwen2.5:32b-instruct-q4_K_M",
    "temperature": 0.0,
    "top_p": 0.9,
    "max_tokens": 1024,
    "request_timeout_s": 300,
    "max_retries": 3,
    "retry_backoff_s": 5.0
  },

  "runtime": {
    "num_workers": 1,
    "shuffle_files": true,
    "resume_mode": "append",
    "dry_run": false,
    "log_level": "INFO",
    "log_every_n_examples": 50
  },

  "output": {
    "qa_schema_version": "v1",
    "include_source_text": false,
    "include_semantic_tags": true,
    "output_file_pattern": "{input_basename}.qa_candidates.jsonl"
  },

  "debug": {
    "limit_num_files": 0,
    "limit_num_chunks": 0,
    "dump_example_prompts": false,
    "example_prompts_dir": "logs/qa_prompts"
  }
}
